<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Gradle - Crow&#039;s Sky</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Crow&#039;s Sky"><meta name="msapplication-TileImage" content="/img/avatarCircle.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Crow&#039;s Sky"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Gradle 用户指南官方文档中文版 Gradle基础  生命周期"><meta property="og:type" content="blog"><meta property="og:title" content="Gradle"><meta property="og:url" content="http://example.com/2021/04/02/Gradle/"><meta property="og:site_name" content="Crow&#039;s Sky"><meta property="og:description" content="Gradle 用户指南官方文档中文版 Gradle基础  生命周期"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/gradle-basic-5.png"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/gradle-basic-7.png"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/ba94f072cd15433194f201853a1ed3c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/f9b3db405be17d8fef861c9a42087339.png"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/image-20240227152415767.png"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/640-20230103162359267.jpeg"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/0004.png"><meta property="og:image" content="http://example.com/2021/04/02/Gradle/0005.png"><meta property="article:published_time" content="2021-04-02T08:35:43.000Z"><meta property="article:modified_time" content="2024-07-16T03:56:25.459Z"><meta property="article:author" content="White Crow"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2021/04/02/Gradle/gradle-basic-5.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2021/04/02/Gradle/"},"headline":"Gradle","image":["http://example.com/2021/04/02/Gradle/gradle-basic-5.png","http://example.com/2021/04/02/Gradle/gradle-basic-7.png","http://example.com/2021/04/02/Gradle/f9b3db405be17d8fef861c9a42087339.png","http://example.com/2021/04/02/Gradle/image-20240227152415767.png","http://example.com/2021/04/02/Gradle/0004.png","http://example.com/2021/04/02/Gradle/0005.png"],"datePublished":"2021-04-02T08:35:43.000Z","dateModified":"2024-07-16T03:56:25.459Z","author":{"@type":"Person","name":"white crow"},"publisher":{"@type":"Organization","name":"Crow's Sky","logo":{"@type":"ImageObject","url":"http://example.com/img/avatarCircle.png"}},"description":"Gradle 用户指南官方文档中文版 Gradle基础  生命周期"}</script><link rel="canonical" href="http://example.com/2021/04/02/Gradle/"><link rel="icon" href="/img/avatarCircle.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/avatarCircle.png" alt="Crow&#039;s Sky" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/WhileCrow"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-10-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-04-02T08:35:43.000Z" title="4/2/2021, 4:35:43 PM">2021-04-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-07-16T03:56:25.459Z" title="7/16/2024, 11:56:25 AM">2024-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span> / </span><a class="link-muted" href="/categories/Android/Other/">Other</a><span> / </span><a class="link-muted" href="/categories/Android/Other/BuildTool/">BuildTool</a></span><span class="level-item">15 minutes read (About 2217 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Gradle</h1><div class="content"><p><a target="_blank" rel="noopener" href="https://doc.yonyoucloud.com/doc/wiki/project/GradleUserGuide-Wiki/index.html">Gradle 用户指南官方文档中文版</a></p>
<h2 id="Gradle基础"><a href="#Gradle基础" class="headerlink" title="Gradle基础"></a>Gradle基础</h2><p><img src="/2021/04/02/Gradle/gradle-basic-5.png" alt="gradle basic 5"></p>
<p><img src="/2021/04/02/Gradle/gradle-basic-7.png" alt="gradle basic 7"></p>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p><img src="/2021/04/02/Gradle/ba94f072cd15433194f201853a1ed3c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt="img"></p>
<span id="more"></span>

<h3 id="生命周期监听-HOOK"><a href="#生命周期监听-HOOK" class="headerlink" title="生命周期监听(HOOK)"></a>生命周期监听(HOOK)</h3><p><img src="/2021/04/02/Gradle/f9b3db405be17d8fef861c9a42087339.png" alt="img"></p>
<h3 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h3><p>Gradle的构建由一个或多个Project组成（根目录下setting.gradle决定），一个打印Project所有属性信息的示例如下:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./gradlew <span class="attr">app:</span>properties</span><br><span class="line">常见如：</span><br><span class="line">项目名称: project.name</span><br><span class="line">项目目录: project.projectDir</span><br><span class="line">构建目录: project.buildDir</span><br><span class="line">根项目: project.rootProject</span><br><span class="line">版本: project.version</span><br><span class="line">组: project.group</span><br><span class="line">状态: project.status</span><br></pre></td></tr></table></figure>

<h3 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h3><p>Gradle Plugin 中的Task主要有三种：**<code>普通Task</code><strong>、</strong><code>增量Task</code><strong>、</strong><code>Transform</code>**。</p>
<p>Task一般会继承 <strong><code>DefaultTask</code></strong> 或 **<code>IncrementalTask</code>**，而 <strong><code>@TaskAction</code></strong> 注解的方法，就是此Task做的事。</p>
<p>继承 <strong><code>IncrementalTask</code></strong> 的类为增量Task，这个增量是相对于全量来说的，全量指的是：调用完clean后第一次编译过程，修改代码或资源后再次编译，就是增量编译</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IncrementalTask</span> <span class="keyword">extends</span> <span class="title">BaseTask</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 是否需要增量，默认false</span></span><br><span class="line">    <span class="meta">@Internal</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isIncremental</span><span class="params">()</span> </span>&#123; &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 需要子类实现，全量时执行的任务</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doFullTaskAction</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 增量时执行的任务，默认什么都不执行，参数是增量时修改过的文件</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doIncrementalTaskAction</span><span class="params">(Map&lt;File, FileStatus&gt; changedInputs)</span> <span class="keyword">throws</span> Exception</span>&#123; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@TaskAction</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">taskAction</span><span class="params">(IncrementalTaskInputs inputs)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 判断是否是增量，是执行doIncrementalTaskAction，否则执行doFullTaskAction</span></span><br><span class="line">    ｝</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取修改文件</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Map&lt;File, FileStatus&gt; <span class="title">getChangedInputs</span><span class="params">(IncrementalTaskInputs inputs)</span> </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至于 <strong><code>Transform</code><strong>（变换），是Android官方提供给开发者，在</strong>.class → .dex转换期间用来修改.class文件的一套API</strong>，留意 <strong><code>transform()</code></strong> 方法的实现就好。</p>
<h2 id="Gradle-Plugin-Version-or-Gradle-Vesion"><a href="#Gradle-Plugin-Version-or-Gradle-Vesion" class="headerlink" title="Gradle Plugin Version or Gradle Vesion"></a>Gradle Plugin Version or Gradle Vesion</h2><p><strong>Gladle插件版本(AGP)  build.gradle文件  classpath’com.android.tools.build:gradle:3.0.0’ 指定，是AS用来引入gladle特性的插件</strong></p>
<p><strong>Gladle版本(Gradle)：</strong>    gradle/wrapper/gradle-wrapper.properties文件中 distributionUrl=https://services.gradle.org/distributions/gradle-x.x.x.zip 指定，也即使gradle本体的版本</p>
<p><strong>简述：这很好理解，gradle-wrapper.properties配置后会下载该版本Gradle本体到/gradle目录下，这就是gradle本体目录了</strong></p>
<p><img src="/2021/04/02/Gradle/image-20240227152415767.png" alt="image-20240227152415767"></p>
<p>AGP和gradle的版本对应关系：</p>
<table>
<thead>
<tr>
<th align="left">插件版本</th>
<th align="left">所需的 Gradle 版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">7.3</td>
<td align="left">7.4</td>
</tr>
<tr>
<td align="left">7.2</td>
<td align="left">7.3.3</td>
</tr>
<tr>
<td align="left">7.1</td>
<td align="left">7.2</td>
</tr>
<tr>
<td align="left">7.0</td>
<td align="left">7.0</td>
</tr>
<tr>
<td align="left">4.2.0+</td>
<td align="left">6.7.1</td>
</tr>
<tr>
<td align="left">4.1.0+</td>
<td align="left">6.5+</td>
</tr>
<tr>
<td align="left">4.0.0+</td>
<td align="left">6.1.1+</td>
</tr>
<tr>
<td align="left">3.6.0 - 3.6.4</td>
<td align="left">5.6.4+</td>
</tr>
<tr>
<td align="left">3.5.0 - 3.5.4</td>
<td align="left">5.4.1+</td>
</tr>
<tr>
<td align="left">lower version</td>
<td align="left">lower version</td>
</tr>
</tbody></table>
<p><strong>Android Studio版本(AS)</strong></p>
<p><img src="/2021/04/02/Gradle/640-20230103162359267.jpeg" alt="AS &gt; AGP："></p>
<hr>
<h2 id="Dependencies-Tree-Check"><a href="#Dependencies-Tree-Check" class="headerlink" title="Dependencies Tree Check"></a>Dependencies Tree Check</h2><h3 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h3><p><code>Task :app:dependencies</code>用于输出项目依赖项的树状结构</p>
<p>如果 dependencies 信息太多，可以保存到文件：<code>./gradlew :app:dependencies --configuration releaseRuntimeClassPath &gt; dependencies.txt</code>，这样更方便搜索和查看。项目依赖项信息非常有用，可以用来排查依赖冲突、分析库依赖关系等。</p>
<p><strong>全部依赖:</strong>  gradlew app:dependencies</p>
<p><strong>release依赖:</strong>   gradlew app:dependencies –configuration releaseRuntimeClasspath</p>
<p><code>./gradlew app:dependencies --configuration debugRuntimeClasspath</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--configuration 后参数</span><br><span class="line">正式环境依赖： releaseRuntimeClasspath</span><br><span class="line"></span><br><span class="line">debug依赖:  debugRuntimeClasspath</span><br><span class="line"></span><br><span class="line">编译依赖： compile</span><br></pre></td></tr></table></figure>

<p>后面带有 “(*)” 的库就表示 这个库有被覆盖过（最高的版本覆盖）。</p>
<blockquote>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">androidx.annotation:annotation:1.1.0 -&gt; 1.3.0</span></span><br><span class="line"></span><br><span class="line"><span class="section">org.jetbrains.kotlin:kotlin-stdlib:1.5.31 -&gt; 1.7.10 (*)</span></span><br><span class="line"></span><br><span class="line"><span class="section">org.jetbrains.kotlin:kotlin-stdlib:1.7.10 (*)</span></span><br><span class="line"></span><br><span class="line"><span class="section">androidx.test:core:&#123;strictly 1.4.0&#125; -&gt; 1.4.0 (c)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>-&gt;</code>：表示冲突，比如这个1.1.0 -&gt; 1.3.0，<code>-&gt;</code> 后面的版本表示Gradle决议之后的版本，这里表示1.1.0版本被拉高到1.3.0；</li>
<li><code>*</code>：<code>*</code>其实是省略的意思，层级太深，Gradle就省略了一部分，而越深的信息也不太重要，就显的冗余，往往重要的信息都在前几层；</li>
<li><code>c</code>：c是<code>constraints</code>的简称，主要是用来保证当前依赖项所需要的依赖的版本的一致性，白话讲就是为了防止其他依赖项把我需要的依赖给拉高而导致我自己不可用的情况。</li>
<li><code>strictly</code>：strictly跟force一样表示强制使用该版本，区别在于strictly可以在依赖树里标示出来，而force则没有任何标示，所以force在高版本里也被废弃了。</li>
</ul>
</blockquote>
<h3 id="dependencyInsight"><a href="#dependencyInsight" class="headerlink" title="dependencyInsight"></a>dependencyInsight</h3><p><code>Task :app:dependencyInsight</code> 用于输出项目中特定依赖项的详细信息</p>
<p>使用这个 task 的方式是：<code>./gradlew :app:dependencyInsight --configuration someConf --dependency someDep</code>，必须有 –configuration 和 –dependency 选项。对于 –configuration 选项参数，可以通过上面的<code>Task :app:androidDependencies</code> 查看。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew module-<span class="attr">detail:</span>dependencyInsight --dependency component-media --configuration releaseRuntimeClasspath</span><br></pre></td></tr></table></figure>





<h2 id="How-Gradle-depend-on"><a href="#How-Gradle-depend-on" class="headerlink" title="How Gradle depend on"></a>How Gradle depend on</h2><h3 id="本地库模块依赖项"><a href="#本地库模块依赖项" class="headerlink" title="本地库模块依赖项"></a>本地库模块依赖项</h3><p><strong>module</strong></p>
<p><strong>implementation project(‘:mylibrary’)</strong></p>
<p>这声明了对一个名为“mylibrary”（此名称必须与在您的 settings.gradle 文件中使用 include: 定义的库名称相符）的 Android 库模块的依赖关系。在构建您的应用时，构建系统会编译该库模块，并将生成的编译内容打包到 APK 中。</p>
<h3 id="本地二进制文件依赖项"><a href="#本地二进制文件依赖项" class="headerlink" title="本地二进制文件依赖项"></a>本地二进制文件依赖项</h3><p><strong>jar  java ARchive  .class文件+MENIFEST.MF文件</strong></p>
<p><strong>implementation fileTree(dir: ‘libs’, include: [‘*.jar’])</strong></p>
<p>Gradle 声明了对项目的 module_name/libs/ 目录中 JAR 文件的依赖关系（因为 Gradle 会读取 build.gradle 文件的相对路径）。</p>
<p>或者，您也可以按如下方式指定各个文件：</p>
<p>implementation files(‘libs/foo.jar’, ‘libs/bar.jar’)</p>
<h3 id="远程二进制文件依赖项"><a href="#远程二进制文件依赖项" class="headerlink" title="远程二进制文件依赖项"></a>远程二进制文件依赖项</h3><p><strong>aar  =  jar + AndroidManifest、res、R、public.txt和可能其他</strong></p>
<p><strong>implementation ‘com.example.android:app-magic:12.3’</strong></p>
<p>这实际上是以下代码的简写形式：</p>
<p>implementation group: ‘com.example.android’, name: ‘app-magic’, version: ‘12.3’</p>
<p>这声明了对“com.example.android”命名空间组内的 12.3 版“app-magic”库的依赖关系。</p>
<h2 id="文件格式-aar"><a href="#文件格式-aar" class="headerlink" title="文件格式.aar"></a>文件格式.aar</h2><p><strong>实际上.arr中可能只有.jar 和 AndroidManifest.xml</strong></p>
<p><img src="/2021/04/02/Gradle/0004.png"></p>
<h2 id="Maven依赖"><a href="#Maven依赖" class="headerlink" title="Maven依赖"></a>Maven依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google() &#x2F;&#x2F;Google Maven repository</span><br><span class="line">        jcenter() &#x2F;&#x2F;Bintray’s JCenter Maven repository 已不维护</span><br><span class="line">        mavenCentral() &#x2F;&#x2F;central Maven repository</span><br><span class="line">        maven &#123; url &quot;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;google&quot; &#125;  &#x2F;&#x2F;Google阿里镜像</span><br><span class="line">        maven &#123; url &quot;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;jcenter&quot; &#125;  &#x2F;&#x2F;JCenter阿里镜像</span><br><span class="line">    </span><br><span class="line">        mavenLocal() &#x2F;&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Google 的 Maven 代码库中提供了以下 Android 库的最新版本：</p>
<p>Android 支持库<br>架构组件库<br>约束布局库<br>AndroidX 测试<br>数据绑定库<br>Android 免安装应用库<br>Wear OS<br>Google Play 服务<br>Google Play 结算库<br>Firebase</p>
<p><img src="/2021/04/02/Gradle/0005.png"></p>
<h2 id="补充链接"><a href="#补充链接" class="headerlink" title="补充链接"></a>补充链接</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6950643579643494431">https://juejin.cn/post/6950643579643494431</a></p>
<h2 id="Gradle常用命令"><a href="#Gradle常用命令" class="headerlink" title="Gradle常用命令"></a>Gradle常用命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"># 命令结构</span><br><span class="line">gradle [taskName...] [--option-name...]</span><br><span class="line"></span><br><span class="line"># 增量编译：同一个项目中, 同一个 task除非有必要, 否则不会被无意义的执行多次；</span><br><span class="line"># 缓存：无论是否在同一个项目，只要Task输入没变就复用缓存结果，不必真的执行task；</span><br><span class="line"></span><br><span class="line"># Tasks执行</span><br><span class="line">gradle myTask   # 执行某个Task</span><br><span class="line">gradle :my-subproject:taskName  # 执行子项目中的Task</span><br><span class="line">gradle my-subproject:taskName   # 同上，不指定子项目，会执行所有子项目的此Task，如gradle clean；</span><br><span class="line">gradle task1 task2  # 运行多个Task</span><br><span class="line">gradle dist --exclude-task test # 将某个task排除在执行外</span><br><span class="line">gradle dist -x test # 同上</span><br><span class="line">gradle test --rerun-tasks   # 强制执行UP-TO-DATE的Task，即不走增量编译，执行全量编译；</span><br><span class="line">gradle test --continue  # 默认情况下，一旦Task失败就会构建失败，通过此参数可继续执行；</span><br><span class="line"></span><br><span class="line"># 常见任务(和插件间的Task约定)</span><br><span class="line">gradle build</span><br><span class="line">gradle run</span><br><span class="line">gradle check</span><br><span class="line">gradle clean    # 删除构建目录</span><br><span class="line"></span><br><span class="line"># 构建细节</span><br><span class="line">gradle projects # 列出所有子项目</span><br><span class="line">gradle tasks    # 列出所有Task(分配给任务组的Task)</span><br><span class="line">gradle tasks --group&#x3D;&quot;build setup&quot;  # 列出特定任务组的Task</span><br><span class="line">gradle tasks --all  # 列出所有Task</span><br><span class="line">gradle -q help --task libs  # 查看某个Task的详细信息</span><br><span class="line">gradle myTask --scan    # 生成可视化的编译报告</span><br><span class="line">gradle dependencies # 列出项目依赖</span><br><span class="line">gradle -q project:properties    # 列出项目属性列表</span><br><span class="line"></span><br><span class="line"># 调试选项</span><br><span class="line">-?，-h，--help  # 帮助信息</span><br><span class="line">-v，--version   # 版本信息</span><br><span class="line">-s, --stacktrace    # 打印出异常堆栈跟踪信息；</span><br><span class="line">-S, --full-stacktrace   # 比上面更完整的信息；</span><br><span class="line"></span><br><span class="line"># 性能相关</span><br><span class="line">--build-cache   # 复用缓存</span><br><span class="line">--no-build-cache    # 不复用缓存，默认</span><br><span class="line">--max-workers   # 最大处理器数量</span><br><span class="line">--parallel  # 并行生成项目</span><br><span class="line">--no-parallel   # 不并行生成项目</span><br><span class="line">--priority  # Gradle启动的进程优先级</span><br><span class="line">--profile   # 生成性能报告</span><br><span class="line"></span><br><span class="line"># 守护进程</span><br><span class="line">--daemon # 使用deamon进程构建</span><br><span class="line">--no-daemon # 不使用deamon进程构建</span><br><span class="line">--foreground    # 前台进程启动deamon进程</span><br><span class="line">--status    # 查看运行中和最近停止的deamon进程；</span><br><span class="line">--stop  # 停止所有同一版本的deamon进程；</span><br><span class="line"></span><br><span class="line"># 日志选项</span><br><span class="line">-q, --quiet # 只记录错误</span><br><span class="line">-w, --warn</span><br><span class="line">-i, --info </span><br><span class="line">-d, --debug</span><br><span class="line">--console&#x3D;(auto,plain,rich,verbose) # 指定输出类型</span><br><span class="line">--warning-mode&#x3D;(all,fail,none,summary)  # 指定警告级别</span><br><span class="line"></span><br><span class="line"># 执行选项</span><br><span class="line">--include-build # 复合构建</span><br><span class="line">--offline   # 离线构建</span><br><span class="line">--refresh-dependencies  # 强制清除依赖缓存</span><br><span class="line">--dry-run # 在不实际执行Task的情况下看Task执行顺序</span><br><span class="line">--no-rebuild # 不重复构建项目依赖</span><br><span class="line"></span><br><span class="line"># 环境选项</span><br><span class="line">-b, --build-file # 指定构建文件</span><br><span class="line">-c, --settings-file # 指定设置文件</span><br><span class="line">-g, --gradle-user-home  # 指定默认.Gradle目录</span><br><span class="line">-p, --project-dir   # 指定Gradle的开始目录</span><br><span class="line">--project-cache-dir # 指定缓存目录，默认.gradle</span><br><span class="line">-D, --system-prop   # 设置JVM系统属性</span><br><span class="line">-I, --init-script   # 指定初始化脚本</span><br><span class="line">-P, --project-prop  # 指定根项目的项目属性；</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>//gradle build 命令包含了 gradle assemble ， 可通过 gradle build –dry-run查看</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Gradle</p><p><a href="http://example.com/2021/04/02/Gradle/">http://example.com/2021/04/02/Gradle/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>white crow</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-04-02</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-07-16</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/04/06/Leakcanary/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">leakcanary</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/04/01/Image/"><span class="level-item">Image</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Gradle基础"><span class="level-left"><span class="level-item">1</span><span class="level-item">Gradle基础</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#生命周期"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">生命周期</span></span></a></li><li><a class="level is-mobile" href="#生命周期监听-HOOK"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">生命周期监听(HOOK)</span></span></a></li><li><a class="level is-mobile" href="#Project"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Project</span></span></a></li><li><a class="level is-mobile" href="#Task"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">Task</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Gradle-Plugin-Version-or-Gradle-Vesion"><span class="level-left"><span class="level-item">2</span><span class="level-item">Gradle Plugin Version or Gradle Vesion</span></span></a></li><li><a class="level is-mobile" href="#Dependencies-Tree-Check"><span class="level-left"><span class="level-item">3</span><span class="level-item">Dependencies Tree Check</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#dependencies"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">dependencies</span></span></a></li><li><a class="level is-mobile" href="#dependencyInsight"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">dependencyInsight</span></span></a></li></ul></li><li><a class="level is-mobile" href="#How-Gradle-depend-on"><span class="level-left"><span class="level-item">4</span><span class="level-item">How Gradle depend on</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#本地库模块依赖项"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">本地库模块依赖项</span></span></a></li><li><a class="level is-mobile" href="#本地二进制文件依赖项"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">本地二进制文件依赖项</span></span></a></li><li><a class="level is-mobile" href="#远程二进制文件依赖项"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">远程二进制文件依赖项</span></span></a></li></ul></li><li><a class="level is-mobile" href="#文件格式-aar"><span class="level-left"><span class="level-item">5</span><span class="level-item">文件格式.aar</span></span></a></li><li><a class="level is-mobile" href="#Maven依赖"><span class="level-left"><span class="level-item">6</span><span class="level-item">Maven依赖</span></span></a></li><li><a class="level is-mobile" href="#补充链接"><span class="level-left"><span class="level-item">7</span><span class="level-item">补充链接</span></span></a></li><li><a class="level is-mobile" href="#Gradle常用命令"><span class="level-left"><span class="level-item">8</span><span class="level-item">Gradle常用命令</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatarPng.png" alt="White Crow"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">White Crow</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">80</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">4</p></a></div></div></nav></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/avatarCircle.png" alt="Crow&#039;s Sky" height="28"></a><p class="is-size-7"><span>&copy; 2025 white crow</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://github.com/WhileCrow"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>