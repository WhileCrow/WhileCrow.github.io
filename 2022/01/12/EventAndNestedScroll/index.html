<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>EventAndNestedScroll - Crow&#039;s Sky</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Crow&#039;s Sky"><meta name="msapplication-TileImage" content="/img/avatarCircle.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Crow&#039;s Sky"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="原理&amp;amp;流程一.  ns child会在收到DOWN事件时，找到自己祖上中最近的能与自己匹配的ns parent，与它进行绑定并关闭它的事件拦截机制 二. 然后ns child会在接下来的MOVE事件中判定出用户触发了滑动手势，并把事件流拦截下来给自己消费 三. 消费事件流时，对于每一次MOVE事件增加的滑动距离：  ns child并不是直接自己消费，而是先把它交给ns parent，让n"><meta property="og:type" content="blog"><meta property="og:title" content="EventAndNestedScroll"><meta property="og:url" content="http://example.com/2022/01/12/EventAndNestedScroll/"><meta property="og:site_name" content="Crow&#039;s Sky"><meta property="og:description" content="原理&amp;amp;流程一.  ns child会在收到DOWN事件时，找到自己祖上中最近的能与自己匹配的ns parent，与它进行绑定并关闭它的事件拦截机制 二. 然后ns child会在接下来的MOVE事件中判定出用户触发了滑动手势，并把事件流拦截下来给自己消费 三. 消费事件流时，对于每一次MOVE事件增加的滑动距离：  ns child并不是直接自己消费，而是先把它交给ns parent，让n"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/2022/01/12/EventAndNestedScroll/3527608fd9bd49489965a8b68fd999fb~tplv-k3u1fbpfcp-watermark-20220113153258262.awebp"><meta property="og:image" content="http://example.com/2022/01/12/EventAndNestedScroll/image-20220112112026228.png"><meta property="article:published_time" content="2022-01-12T07:09:17.000Z"><meta property="article:modified_time" content="2024-03-25T07:35:03.005Z"><meta property="article:author" content="White Crow"><meta property="article:tag" content="Core"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2022/01/12/EventAndNestedScroll/3527608fd9bd49489965a8b68fd999fb~tplv-k3u1fbpfcp-watermark-20220113153258262.awebp"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2022/01/12/EventAndNestedScroll/"},"headline":"EventAndNestedScroll","image":["http://example.com/2022/01/12/EventAndNestedScroll/image-20220112112026228.png"],"datePublished":"2022-01-12T07:09:17.000Z","dateModified":"2024-03-25T07:35:03.005Z","author":{"@type":"Person","name":"white crow"},"publisher":{"@type":"Organization","name":"Crow's Sky","logo":{"@type":"ImageObject","url":"http://example.com/img/avatarCircle.png"}},"description":"原理&amp;流程一.  ns child会在收到DOWN事件时，找到自己祖上中最近的能与自己匹配的ns parent，与它进行绑定并关闭它的事件拦截机制 二. 然后ns child会在接下来的MOVE事件中判定出用户触发了滑动手势，并把事件流拦截下来给自己消费 三. 消费事件流时，对于每一次MOVE事件增加的滑动距离：  ns child并不是直接自己消费，而是先把它交给ns parent，让n"}</script><link rel="canonical" href="http://example.com/2022/01/12/EventAndNestedScroll/"><link rel="icon" href="/img/avatarCircle.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/avatarCircle.png" alt="Crow&#039;s Sky" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/WhileCrow"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-10-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-01-12T07:09:17.000Z" title="1/12/2022, 3:09:17 PM">2022-01-12</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-03-25T07:35:03.005Z" title="3/25/2024, 3:35:03 PM">2024-03-25</time></span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">12 minutes read (About 1804 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">EventAndNestedScroll</h1><div class="content"><h1 id="原理-amp-流程"><a href="#原理-amp-流程" class="headerlink" title="原理&amp;流程"></a>原理&amp;流程</h1><p>一.  <code>ns child</code>会在收到<code>DOWN</code>事件时，找到自己祖上中最近的能与自己匹配的<code>ns parent</code>，与它进行绑定并关闭它的事件拦截机制</p>
<p>二. 然后<code>ns child</code>会在接下来的<code>MOVE</code>事件中判定出用户触发了滑动手势，并把事件流拦截下来给自己消费</p>
<p>三. 消费事件流时，对于每一次<code>MOVE</code>事件增加的滑动距离：</p>
<ol>
<li><code>ns child</code>并不是直接自己消费，而是先把它交给<code>ns parent</code>，让<code>ns parent</code>可以在<code>ns child</code>之前消费滑动<code>dispatch/onNestedPreScroll()</code></li>
<li>如果<code>ns parent</code>没有消费或是没有消费完，<code>ns child</code>再自己消费剩下的滑动<code>dispatchNestedScroll()</code></li>
<li>如果<code>ns child</code>自己还是没有消费完这个滑动，会再把剩下的滑动交给<code>ns parent</code>消费<code>onNestedScroll()</code></li>
<li>最后如果滑动还有剩余，<code>ns child</code>可以做最终的处理<code>dispatchNestedScroll()</code></li>
</ol>
<p>四. 同时在<code>ns child</code>的<code>computeScroll()</code>方法中，<code>ns child</code>也会把自己因为用户<code>fling</code>操作引发的滑动，与上一条中用户滑动屏幕触发的滑动一样，使用「parent -&gt; child -&gt; parent -&gt; child」的顺序进行消费</p>
<span id="more"></span>

<p><code>ns child</code>使用更灵活的方式找到和绑定自己的<code>ns parent</code>，而不是直接找自己的上一级结点</p>
<p><code>ns child</code>在<code>DOWN</code>事件时关闭<code>ns parent</code>的事件拦截机制单独用了一个 Flag 进行关闭，这就不会关闭<code>ns parent</code>对其他手势的拦截，也不会递归往上关闭祖上们的事件拦截机制。<code>ns child</code>直到在<code>MOVE</code>事件中确定自己要开始滑动后，才会调用<code>requestDisallowInterceptTouchEvent(true)</code>递归关闭祖上们全部的事件拦截</p>
<p>对每一次<code>MOVE</code>事件传递来的滑动，都使用「parent -&gt; child -&gt; parent -&gt; child」机制进行消费，让<code>ns child</code>在消费滑动时与<code>ns parent</code>配合更加细致、紧密和灵活</p>
<p>对于因为用户<code>fling</code>操作引发的滑动，与用户滑动屏幕触发的滑动使用同样的机制进行消费，实现了完美的惯性连续效果</p>
<p>DOWN事件来时，NSC<code>startNestedScroll()</code>找到自己祖上匹配的NSP进行绑定并关闭NSP的拦截；</p>
<p>MOVE事件来时：</p>
<p><strong>「parent -&gt; child -&gt; parent -&gt; child」的顺序进行消费</strong></p>
<p>NSC<code>dispatchNestedPreScroll()</code>中触发NSP<code>onNestedPreScroll()</code>预先进行滑动事件的消费，之后将剩余事件返回；接着NSC消费剩余事件；</p>
<p>NSC消费事件后再<code>dispatchNestedScroll()</code>去将剩余事件传递给NSP<code>onNestedScroll()</code>消费。</p>
<p>NSP消费完剩余事件返回NSC，NSC此时可以做最后的处理，比如overScroll效果比如在 fling 的时候停止<code>scroller</code></p>
<p>与<code>MOVE</code>事件中处理滑动按照这个顺序进行消费：「<code>dispatchNestedPreScroll()</code>到Parent -&gt; 自己 -&gt; <code>dispatchNestedScroll()</code> -&gt; 自己」一样，惯性滑动按照上面的顺序。</p>
<h1 id="Case分析"><a href="#Case分析" class="headerlink" title="Case分析"></a>Case分析</h1><h2 id="ScrollView嵌套ScrollView"><a href="#ScrollView嵌套ScrollView" class="headerlink" title="ScrollView嵌套ScrollView"></a>ScrollView嵌套ScrollView</h2><p>默认情况：外部ScrollView优先获取上下滑动的权力，在蓝色区域上下滑动，内部ScrollView并不会上下滑动</p>
<img src="/2022/01/12/EventAndNestedScroll/3527608fd9bd49489965a8b68fd999fb~tplv-k3u1fbpfcp-watermark-20220113153258262.awebp" alt="非嵌套滑动.gif" style="zoom: 67%;">

<p>简述：</p>
<p>默认内部ScrollView会消费DOWN事件</p>
<p>默认外部ScrollView优先获取MOVE事件处理机会，并且当yDiff &gt; mTouchSlop时，外部ScrollView会拦截掉MOVE事件并给内部ScrollView发CANCEL事件。</p>
<p>表现：<em>（不考虑后来 Google 给它加的<code>NestedScroll</code>开关）</em>，嵌套ScrollView同向滑动的效果如上，内部ScrollView优先获得DOWN事件的处理机会，外部的ScrollView优先获得MOVE事件的处理机会并且拦截（yDiff &gt; mTouchSlop（8，可配置常量）)。</p>
<p>分析:</p>
<p>当外部ScrollView嵌套内部ScrollView时,DOWN事件在内部ScrollView的onTouchEvent中返回true，内部ScrollView处理了DOWN事件。MOVE事件首先到达外部ScrollView的onInterceptTouchEvent方法，当滑动距离大于mTouchSlop时，会拦截掉MOVE事件，给内部ScrollView发出CANCEL事件，从而外部ScrollView获得了事件的处理权，内部ScrollView失去了事件的处理权。</p>
<p>ScrollView 实现了ViewParent接口，而ViewParent接口声明了和NestedScrollParent一样的接口方法</p>
<p>ScrollView 继承于View，而View实现了NestedScrollChild接口方法。</p>
<p><img src="/2022/01/12/EventAndNestedScroll/image-20220112112026228.png" alt="image-20220112112026228"></p>
<p>(看这就知道了，整体滑动嵌套的思路是NSC先获取事件处理优先权，也许是通过禁止外部拦截的方法获取的，自身的滑动事件消费剩余的滑动距离再由NSC在自身的dispatchNestedXXX中，通知NSP的onNestesXXScroll方法承接，所以<strong>内部是主动，外部是被动</strong>。至于惯性扔动事件类似？)</p>
<p>如果要达到外层ScrollView可以消费内部溢出的滑动和Fling事件的话，需要外层实现NestedScrollingParent，内层实现NestedScrollingChild协作事件处理。</p>
<p>???：</p>
<p>1、ScrollView覆盖了View的onTouchEvent并默认返回true；所以如果一个ScrollView外部还嵌套了其他ViewGroup了，则Down事件不会返回到外部，也同时MOVE、UP事件也随DOWN事件被ScrollView或其子类内部消费。</p>
<p>2、外ScrollView嵌套内ScrollView，内ScrollView包裹一个内部View的话，不打开（残缺的）嵌套滑动开关<code>setNestedScrollingEnabled(true)</code>的话，点击内部View拖动：</p>
<p>那么DOWN事件会由外ScrollView传到内ScrollView再传到内部View，内部View不消费，回传到内ScrollView消费；</p>
<p>MOVE事件diff超过<code>touchSlop</code>的话会被外ScrollView拦截处理，并产生一个CANCEL事件交给内SCrollView，因为DOWN已经被内ScrollView消费了，所以CANCEL事件也交给了内ScrollView消费，而不会再给到内部View。</p>
<p>UP事件只被外ScrollView分发并传递给外ScrollView的onTouchEvent消费，是的没有拦截。原因未知（理论上应该跟CANCEL一样才对…….）</p>
<p>3、不用小心翼翼地让改动尽量小，既然内部优先，完全可以让内部的<code>ScrollView</code>在<code>DOWN</code>事件的时候就申请外部不拦截，然后在滑动一段距离后，如果判断自己在该滑动方向无法滑动，再取消对外部的拦截限制，像这样也只能实现滑动事件，对于惯性事件的处理是不到位的。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleNestedScrollView</span></span>(context: Context, attrs: AttributeSet) : ScrollView(context, attrs) &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">dispatchTouchEvent</span><span class="params">(ev: <span class="type">MotionEvent</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (ev.actionMasked == MotionEvent.ACTION_DOWN) parent.requestDisallowInterceptTouchEvent(<span class="literal">true</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (ev.actionMasked == MotionEvent.ACTION_MOVE) &#123;</span><br><span class="line">            <span class="keyword">val</span> offsetY = ev.y.toInt() - getInt(<span class="string">&quot;mLastMotionY&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Math.abs(offsetY) &gt; getInt(<span class="string">&quot;mTouchSlop&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((offsetY &gt; <span class="number">0</span> &amp;&amp; isScrollToTop()) || (offsetY &lt; <span class="number">0</span> &amp;&amp; isScrollToBottom())) &#123;</span><br><span class="line">                    parent.requestDisallowInterceptTouchEvent(<span class="literal">false</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(ev)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ScrollView的真实源码实际上是直接在DOWN事件中请求了parent禁止拦截，然后自身先处理消耗MOVE事件直到达到自身的滑动边界之后再找自己的parent处理剩余滑动距离。对于惯性事件也是处理不到位的。</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904184911773709">浅析NestedScrolling嵌套滑动机制之基础篇 - 掘金 (juejin.cn)</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6899005219687497735#heading-3">事件分发四部曲之二《嵌套滑动事件分析》 - 掘金 (juejin.cn)</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>EventAndNestedScroll</p><p><a href="http://example.com/2022/01/12/EventAndNestedScroll/">http://example.com/2022/01/12/EventAndNestedScroll/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>white crow</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-01-12</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-03-25</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Core/">Core</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/01/24/HandlerEpoll/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">HandlerEpoll</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/01/10/Java/"><span class="level-item">Java</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#原理-amp-流程"><span class="level-left"><span class="level-item">1</span><span class="level-item">原理&amp;流程</span></span></a></li><li><a class="level is-mobile" href="#Case分析"><span class="level-left"><span class="level-item">2</span><span class="level-item">Case分析</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ScrollView嵌套ScrollView"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">ScrollView嵌套ScrollView</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatarPng.png" alt="White Crow"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">White Crow</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">78</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">4</p></a></div></div></nav></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/avatarCircle.png" alt="Crow&#039;s Sky" height="28"></a><p class="is-size-7"><span>&copy; 2024 white crow</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://github.com/WhileCrow"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>